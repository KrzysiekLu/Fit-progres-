<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Google Fit API Example</title>
</head>
<body>
  <button id="authorize-button" style="display: none;">Authorize</button>
  <pre id="data"></pre>

  <script>
    const CLIENT_ID = 'YOUR_CLIENT_ID';
    const API_KEY = 'YOUR_API_KEY';
    const SCOPES = 'https://www.googleapis.com/auth/fitness.activity.read';
    const DISCOVERY_URL = 'https://www.googleapis.com/discovery/v1/apis/fitness/v1/rest';

    function handleClientLoad() {
      gapi.load('client:auth2', initClient);
    }

    function initClient() {
      gapi.client.init({
        apiKey: API_KEY,
        clientId: CLIENT_ID,
        discoveryDocs: [DISCOVERY_URL],
        scope: SCOPES
      }).then(function () {
        gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);
        updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
        document.getElementById('authorize-button').onclick = handleAuthClick;
      });
    }

    function updateSigninStatus(isSignedIn) {
      if (isSignedIn) {
        fetchData();
      }
    }

    function handleAuthClick(event) {
      gapi.auth2.getAuthInstance().signIn();
    }

    function fetchData() {
  gapi.client.fitness.users.dataSources.datasets.get({
    userId: 'me',
    dataSourceId: 'derived:com.google.step_count.delta:com.google.android.gms:estimated_steps',
    datasetId: '0-1'
  }).then(function(response) {
    console.log(response);
    const data = response.result;
    const dataElement = document.getElementById('data');
    dataElement.innerText = JSON.stringify(data, null, 2);
  }).catch(function(error) {
    console.error('Error: ' + error.result.error.message);
  });
}

    
    
  </script>
  <script src="https://apis.google.com/js/api.js?onload=handleClientLoad"></script>
</body>
</html>
